{"version":3,"file":"vamtiger-postinstall.js","sources":["../node_modules/tslib/tslib.js","../source/types.ts","../source/get-package-data.ts","../source/get-dependencies.ts","../source/get-dev-dependecies.ts","../source/install.ts","../source/postinstall-dist-tag.ts","../source/postinstall-copy.ts","../source/vamtiger-postinstall.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global global, define, System, Reflect, Promise */\r\nvar __extends;\r\nvar __assign;\r\nvar __rest;\r\nvar __decorate;\r\nvar __param;\r\nvar __metadata;\r\nvar __awaiter;\r\nvar __generator;\r\nvar __exportStar;\r\nvar __values;\r\nvar __read;\r\nvar __spread;\r\nvar __spreadArrays;\r\nvar __await;\r\nvar __asyncGenerator;\r\nvar __asyncDelegator;\r\nvar __asyncValues;\r\nvar __makeTemplateObject;\r\nvar __importStar;\r\nvar __importDefault;\r\n(function (factory) {\r\n    var root = typeof global === \"object\" ? global : typeof self === \"object\" ? self : typeof this === \"object\" ? this : {};\r\n    if (typeof define === \"function\" && define.amd) {\r\n        define(\"tslib\", [\"exports\"], function (exports) { factory(createExporter(root, createExporter(exports))); });\r\n    }\r\n    else if (typeof module === \"object\" && typeof module.exports === \"object\") {\r\n        factory(createExporter(root, createExporter(module.exports)));\r\n    }\r\n    else {\r\n        factory(createExporter(root));\r\n    }\r\n    function createExporter(exports, previous) {\r\n        if (exports !== root) {\r\n            if (typeof Object.create === \"function\") {\r\n                Object.defineProperty(exports, \"__esModule\", { value: true });\r\n            }\r\n            else {\r\n                exports.__esModule = true;\r\n            }\r\n        }\r\n        return function (id, v) { return exports[id] = previous ? previous(id, v) : v; };\r\n    }\r\n})\r\n(function (exporter) {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n\r\n    __extends = function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n\r\n    __assign = Object.assign || function (t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n\r\n    __rest = function (s, e) {\r\n        var t = {};\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n            t[p] = s[p];\r\n        if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n            for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n                if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                    t[p[i]] = s[p[i]];\r\n            }\r\n        return t;\r\n    };\r\n\r\n    __decorate = function (decorators, target, key, desc) {\r\n        var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n        if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n        else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n        return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n    };\r\n\r\n    __param = function (paramIndex, decorator) {\r\n        return function (target, key) { decorator(target, key, paramIndex); }\r\n    };\r\n\r\n    __metadata = function (metadataKey, metadataValue) {\r\n        if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n    };\r\n\r\n    __awaiter = function (thisArg, _arguments, P, generator) {\r\n        return new (P || (P = Promise))(function (resolve, reject) {\r\n            function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n            function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n            function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n            step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n        });\r\n    };\r\n\r\n    __generator = function (thisArg, body) {\r\n        var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n        return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n        function verb(n) { return function (v) { return step([n, v]); }; }\r\n        function step(op) {\r\n            if (f) throw new TypeError(\"Generator is already executing.\");\r\n            while (_) try {\r\n                if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n                if (y = 0, t) op = [op[0] & 2, t.value];\r\n                switch (op[0]) {\r\n                    case 0: case 1: t = op; break;\r\n                    case 4: _.label++; return { value: op[1], done: false };\r\n                    case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                    case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                    default:\r\n                        if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                        if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                        if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                        if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                        if (t[2]) _.ops.pop();\r\n                        _.trys.pop(); continue;\r\n                }\r\n                op = body.call(thisArg, _);\r\n            } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n            if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n        }\r\n    };\r\n\r\n    __exportStar = function (m, exports) {\r\n        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n    };\r\n\r\n    __values = function (o) {\r\n        var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n        if (m) return m.call(o);\r\n        return {\r\n            next: function () {\r\n                if (o && i >= o.length) o = void 0;\r\n                return { value: o && o[i++], done: !o };\r\n            }\r\n        };\r\n    };\r\n\r\n    __read = function (o, n) {\r\n        var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n        if (!m) return o;\r\n        var i = m.call(o), r, ar = [], e;\r\n        try {\r\n            while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n        }\r\n        catch (error) { e = { error: error }; }\r\n        finally {\r\n            try {\r\n                if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n            }\r\n            finally { if (e) throw e.error; }\r\n        }\r\n        return ar;\r\n    };\r\n\r\n    __spread = function () {\r\n        for (var ar = [], i = 0; i < arguments.length; i++)\r\n            ar = ar.concat(__read(arguments[i]));\r\n        return ar;\r\n    };\r\n\r\n    __spreadArrays = function () {\r\n        for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n        for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n            for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n                r[k] = a[j];\r\n        return r;\r\n    };\r\n\r\n    __await = function (v) {\r\n        return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n    };\r\n\r\n    __asyncGenerator = function (thisArg, _arguments, generator) {\r\n        if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n        var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n        return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n        function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n        function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n        function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);  }\r\n        function fulfill(value) { resume(\"next\", value); }\r\n        function reject(value) { resume(\"throw\", value); }\r\n        function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n    };\r\n\r\n    __asyncDelegator = function (o) {\r\n        var i, p;\r\n        return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n        function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n    };\r\n\r\n    __asyncValues = function (o) {\r\n        if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n        var m = o[Symbol.asyncIterator], i;\r\n        return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n        function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n        function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n    };\r\n\r\n    __makeTemplateObject = function (cooked, raw) {\r\n        if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n        return cooked;\r\n    };\r\n\r\n    __importStar = function (mod) {\r\n        if (mod && mod.__esModule) return mod;\r\n        var result = {};\r\n        if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n        result[\"default\"] = mod;\r\n        return result;\r\n    };\r\n\r\n    __importDefault = function (mod) {\r\n        return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n    };\r\n\r\n    exporter(\"__extends\", __extends);\r\n    exporter(\"__assign\", __assign);\r\n    exporter(\"__rest\", __rest);\r\n    exporter(\"__decorate\", __decorate);\r\n    exporter(\"__param\", __param);\r\n    exporter(\"__metadata\", __metadata);\r\n    exporter(\"__awaiter\", __awaiter);\r\n    exporter(\"__generator\", __generator);\r\n    exporter(\"__exportStar\", __exportStar);\r\n    exporter(\"__values\", __values);\r\n    exporter(\"__read\", __read);\r\n    exporter(\"__spread\", __spread);\r\n    exporter(\"__spreadArrays\", __spreadArrays);\r\n    exporter(\"__await\", __await);\r\n    exporter(\"__asyncGenerator\", __asyncGenerator);\r\n    exporter(\"__asyncDelegator\", __asyncDelegator);\r\n    exporter(\"__asyncValues\", __asyncValues);\r\n    exporter(\"__makeTemplateObject\", __makeTemplateObject);\r\n    exporter(\"__importStar\", __importStar);\r\n    exporter(\"__importDefault\", __importDefault);\r\n});\r\n","export enum StringConstant {\n    space = ' '\n}\n\nexport enum FolderName {\n    node_modules = 'node_modules'\n}\n\nexport enum InstallScript {\n    install = 'npm install --no-audit'\n}\n\nexport enum CommandlineArgument {\n    distTag = 'distTag',\n    copy = 'copy',\n    sourceFolder = 'sourceFolder',\n    pattern = 'pattern'\n}\n\nexport enum DistTag {\n    source = 'source'\n}\n\nexport enum PackagePath {\n    distTag = '_requested.fetchSpec',\n    dependencies = 'dependencies',\n    devDependencies = 'devDependencies'\n}\n\nexport const ShortCommandlineArgument = {\n    [CommandlineArgument.distTag]: 'd' as 'd',\n    [CommandlineArgument.copy]: 'c' as 'c',\n    [CommandlineArgument.sourceFolder]: 's' as 's',\n    [CommandlineArgument.pattern]: 'p' as 'p'\n};\n\nexport interface IStringObject {\n    [key: string]: string;\n}\n\nexport interface IPostInstallDistTag {\n    distTag: string;\n    workingDirectory: string;\n}\n\nexport interface IGetDependencies {\n    path: string;\n}\n\nexport interface IPostInstallCopy {\n    workingDirectory: string;\n    sourceFolder: string;\n    pattern: string;\n}\nexport interface IInstall {\n    workingDirectory: string;\n    dependencies?: string;\n}\n\nexport interface IGetPackageData {\n    path: string;\n}","import { IGetPackageData } from './types';\nimport getPackageData from 'vamtiger-require';\n\nexport default async function({path: packageDataPath}: IGetPackageData) {\n    const packageData = getPackageData({\n        path: packageDataPath\n    });\n\n    return packageData;\n}","import getPackageData from 'vamtiger-require';\nimport { IGetDependencies, PackagePath, IStringObject, StringConstant } from './types';\n\nconst { dependencies: dependenciesPath } = PackagePath;\nconst { space } = StringConstant;\n\nexport default function ({ path: packagePath}: IGetDependencies) {\n    const currentDependenciesPath = `${packagePath}.${dependenciesPath}`;\n    const dependencies = getPackageData({\n        path: currentDependenciesPath\n    }) as IStringObject;\n    const installDependencies = Object\n        .keys(dependencies)\n        .map(dependency => dependency)\n        .join(space);\n\n    return installDependencies;\n}","import getPackageData from 'vamtiger-require';\nimport { IGetDependencies, PackagePath, IStringObject, StringConstant } from './types';\n\nconst { devDependencies: dependenciesPath } = PackagePath;\nconst { space } = StringConstant;\n\nexport default function ({ path: packagePath}: IGetDependencies) {\n    const currentDependenciesPath = `${packagePath}.${dependenciesPath}`;\n    const dependencies = getPackageData({\n        path: currentDependenciesPath\n    }) as IStringObject;\n    const installDependencies = Object\n        .keys(dependencies)\n        .map(dependency => dependency)\n        .join(space);\n\n    return installDependencies;\n}","import bash from 'vamtiger-bash';\nimport getFolderContent from 'vamtiger-get-directory-content';\nimport { IInstall, InstallScript, FolderName } from './types';\n\nconst { install } = InstallScript;\nconst { node_modules } = FolderName;\n\nexport default async function ({ workingDirectory, dependencies }: IInstall) {\n    const bashOptions = {\n        cwd: workingDirectory\n    };\n    const installDependencies = `${install} --prefix ${workingDirectory} ${dependencies}`;\n\n    console.log(installDependencies);\n    await bash(installDependencies, bashOptions);\n}","import { resolve as resolvePath } from 'path';\nimport getPackageData from './get-package-data';\nimport getDependencies from './get-dependencies';\nimport getDevDependencies from './get-dev-dependecies';\nimport install from './install';\nimport { IPostInstallDistTag, PackagePath } from './types';\n\nconst { distTag: distTagPath } = PackagePath;\n\nexport default async function ({ distTag, workingDirectory }: IPostInstallDistTag) {\n    const packagePath = resolvePath(\n        workingDirectory,\n        'package'\n    );\n    const packageDistTagPath = `${packagePath}.${distTagPath}`;\n    const packageDistTag = await getPackageData({\n        path: packageDistTagPath\n    }).catch(() => '') as string;\n    const dependencies = distTag === packageDistTag && getDependencies({\n        path: packagePath\n    }) || '';\n    const devDependencies = dependencies && getDevDependencies({\n        path: packagePath\n    }) || '';\n\n    dependencies && await await install({\n        workingDirectory,\n        dependencies: [\n            dependencies,\n            devDependencies\n        ].join(' ')\n    });\n}","import { resolve as resolvePath, dirname, basename } from 'path';\nimport { IPostInstallCopy } from './types';\nimport getFolderContent from 'vamtiger-get-directory-content';\nimport copy from 'vamtiger-copy-file';\nimport getPathData from 'vamtiger-get-path-data';\n\nexport default async function ({workingDirectory, sourceFolder, pattern}: IPostInstallCopy) {\n    const sourceFileName = new RegExp(pattern, 'i');\n    const mainPath = require.resolve(workingDirectory);\n    const mainPathData = await getPathData(mainPath);\n    const mainFolder = mainPathData.isDirectory() && mainPath || dirname(mainPath);\n    const sourceFolderEntryPaths = await getFolderContent(sourceFolder)\n        .then(entries => entries.map(entry => resolvePath(sourceFolder, entry)));\n    const sourceFolderEntryPathData = await Promise.all(sourceFolderEntryPaths.map(async sourceFolderEntryPath => ({\n        sourceFolderEntryPath,\n        pathData: await getPathData(sourceFolderEntryPath)\n    })));\n    const sourceFolderEntryFiles = sourceFolderEntryPathData\n        .map(({sourceFolderEntryPath, pathData}) => pathData.isFile() && basename(sourceFolderEntryPath) || '')\n        .filter(sourceFolderEntryFile => sourceFolderEntryFile && sourceFolderEntryFile.match(sourceFileName));\n    const copyParams = sourceFolderEntryFiles.map(sourceFolderEntryFile => ({\n        source: resolvePath(sourceFolder, sourceFolderEntryFile),\n        destination: resolvePath(mainFolder, sourceFolderEntryFile)\n    }));\n\n    await Promise.all(copyParams.map(copy));\n\n    return true;\n}","export * from '../node_modules/tslib/tslib';\nimport { CommandlineArgument, ShortCommandlineArgument } from './types';\nimport Args from 'vamtiger-argv/build/main';\nimport postinstallDistTags from './postinstall-dist-tag';\nimport postinstallCopy from './postinstall-copy';\n\nconst { cwd } = process;\nconst workingDirectory = cwd();\nconst args = new Args();\nconst distTag = args.get(CommandlineArgument.distTag || CommandlineArgument.distTag);\nconst copy = args.get(CommandlineArgument.copy || CommandlineArgument.copy);\nconst sourceFolder = args.get(CommandlineArgument.sourceFolder || CommandlineArgument.sourceFolder);\nconst pattern = args.get(CommandlineArgument.pattern || CommandlineArgument.pattern);\nconst copyParams = copy && sourceFolder && pattern && sourceFolder !== workingDirectory && {\n    workingDirectory,\n    sourceFolder,\n    pattern\n};\n\n\nif (distTag) {\n    postinstallDistTags({ workingDirectory, distTag })\n        .catch(console.warn);\n} else if (copyParams) {\n    postinstallCopy(copyParams)\n        .catch(console.warn);\n}"],"names":["__extends","__assign","__rest","__decorate","__param","__metadata","__awaiter","__generator","__exportStar","__values","__read","__spread","__spreadArrays","__await","__asyncGenerator","__asyncDelegator","__asyncValues","__makeTemplateObject","__importStar","__importDefault","StringConstant","FolderName","InstallScript","CommandlineArgument","DistTag","PackagePath","factory","root","global","self","this","createExporter","exports","previous","Object","create","defineProperty","value","__esModule","id","v","define","amd","module","exporter","extendStatics","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__","constructor","prototype","assign","t","s","i","n","arguments","length","call","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","paramIndex","decorator","metadataKey","metadataValue","metadata","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","result","done","then","apply","body","f","y","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","op","TypeError","pop","push","m","o","ar","error","concat","il","k","a","j","jl","asyncIterator","q","resume","fulfill","settle","shift","cooked","raw","mod","default","ShortCommandlineArgument","[object Object]","distTag","copy","sourceFolder","pattern","async","path","packageDataPath","getPackageData","dependencies","dependenciesPath","space","packagePath","keys","map","dependency","join","devDependencies","install","workingDirectory","bashOptions","cwd","installDependencies","console","log","bash","distTagPath","resolvePath","packageDistTagPath","catch","getDependencies","getDevDependencies","sourceFileName","RegExp","mainPath","require","mainFolder","getPathData","isDirectory","dirname","sourceFolderEntryPaths","getFolderContent","entries","entry","copyParams","all","sourceFolderEntryPath","pathData","isFile","basename","filter","sourceFolderEntryFile","match","source","destination","process","args","Args","get","postinstallDistTags","warn","postinstallCopy"],"mappings":"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"}